var n=function(){return(n=Object.assign||function(n){for(var t,r=1,e=arguments.length;r<e;r++)for(var u in t=arguments[r])Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u]);return n}).apply(this,arguments)};function t(n,t,r,e){return new(r||(r=Promise))(function(u,i){function o(n){try{a(e.next(n))}catch(n){i(n)}}function c(n){try{a(e.throw(n))}catch(n){i(n)}}function a(n){n.done?u(n.value):new r(function(t){t(n.value)}).then(o,c)}a((e=e.apply(n,t||[])).next())})}function r(n,t){var r,e,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,e&&(u=2&i[0]?e.return:i[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,i[1])).done)return u;switch(e=0,u&&(i=[2&i[0],u.value]),i[0]){case 0:case 1:u=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,e=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(u=(u=o.trys).length>0&&u[u.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!u||i[1]>u[0]&&i[1]<u[3])){o.label=i[1];break}if(6===i[0]&&o.label<u[1]){o.label=u[1],u=i;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(i);break}u[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(n,o)}catch(n){i=[6,n],e=0}finally{r=u=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var e=function(n){return null!=n&&"object"==typeof n&&!0===n["@@functional/placeholder"]};var u=function(n){return function t(r){return 0===arguments.length||e(r)?t:n.apply(this,arguments)}};var i=function(n){return function t(r,i){switch(arguments.length){case 0:return t;case 1:return e(r)?t:u(function(t){return n(r,t)});default:return e(r)&&e(i)?t:e(r)?u(function(t){return n(t,i)}):e(i)?u(function(t){return n(r,t)}):n(r,i)}}};var o=function(n){return function t(r,o,c){switch(arguments.length){case 0:return t;case 1:return e(r)?t:i(function(t,e){return n(r,t,e)});case 2:return e(r)&&e(o)?t:e(r)?i(function(t,r){return n(t,o,r)}):e(o)?i(function(t,e){return n(r,t,e)}):u(function(t){return n(r,o,t)});default:return e(r)&&e(o)&&e(c)?t:e(r)&&e(o)?i(function(t,r){return n(t,r,c)}):e(r)&&e(c)?i(function(t,r){return n(t,o,r)}):e(o)&&e(c)?i(function(t,e){return n(r,t,e)}):e(r)?u(function(t){return n(t,o,c)}):e(o)?u(function(t){return n(r,t,c)}):e(c)?u(function(t){return n(r,o,t)}):n(r,o,c)}}};var c=function(n){return"[object Object]"===Object.prototype.toString.call(n)};var a=function(n,t){return Object.prototype.hasOwnProperty.call(t,n)},s=o(function(n,t,r){var e,u={};for(e in t)a(e,t)&&(u[e]=a(e,r)?n(e,t[e],r[e]):t[e]);for(e in r)a(e,r)&&!a(e,u)&&(u[e]=r[e]);return u}),l=o(function n(t,r,e){return s(function(r,e,u){return c(e)&&c(u)?n(t,e,u):t(r,e,u)},r,e)}),f=i(function(n,t){return l(function(n,t,r){return r},n,t)});var h=function(n,t){switch(n){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,r){return t.apply(this,arguments)};case 3:return function(n,r,e){return t.apply(this,arguments)};case 4:return function(n,r,e,u){return t.apply(this,arguments)};case 5:return function(n,r,e,u,i){return t.apply(this,arguments)};case 6:return function(n,r,e,u,i,o){return t.apply(this,arguments)};case 7:return function(n,r,e,u,i,o,c){return t.apply(this,arguments)};case 8:return function(n,r,e,u,i,o,c,a){return t.apply(this,arguments)};case 9:return function(n,r,e,u,i,o,c,a,s){return t.apply(this,arguments)};case 10:return function(n,r,e,u,i,o,c,a,s,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}};var p,d=function n(t,r,u){return function(){for(var i=[],o=0,c=t,a=0;a<r.length||o<arguments.length;){var s;a<r.length&&(!e(r[a])||o>=arguments.length)?s=r[a]:(s=arguments[o],o+=1),i[a]=s,e(s)||(c-=1),a+=1}return c<=0?u.apply(this,i):h(c,n(t,i,u))}},y=i(function(n,t){return 1===n?u(t):h(n,d(n,[],t))}),v=u(function(n){return y(n.length,n)}),b=v(function(n,t){for(var r,e=null,u=null,i=0;i<t.length;i++)r=t[i],n.includes(r)?e&&(u=i):(null==e&&(e=i),u=null);return t.slice(e||0,u||t.length)}),g=(p=function(n,e,u){return t(void 0,void 0,void 0,function(){var t,i,o;return r(this,function(r){switch(r.label){case 0:return~u?(i=p,o=[n],[4,n[u](e)]):[3,3];case 1:return[4,i.apply(void 0,o.concat([r.sent(),--u]))];case 2:return t=r.sent(),[3,4];case 3:t=e,r.label=4;case 4:return[2,t]}})})},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){return p(n,t,n.length-1)}}),w=function(n){var t=[];if(n.params){var r=[];Object.entries(n.params).forEach(function(n){var t=n[0],e=n[1];null!=e&&null!=e&&r.push(t+"="+e.replace(/&/g,"\\&"))}),r.length&&t.push("?"+r.join("&"))}return encodeURI(n.url+t.map(b("-")).join("/"))},j=function(n,t){var r=b("/");return t.includes("://")||t.startsWith(n)?t:r(n)+"/"+r(t)},m={base:"/",json:!0,headers:{},middleware:[]},O=function(){function n(n){var e=this;this.basic_middleware=[function(n){return t(e,void 0,void 0,function(){return r(this,function(t){return n.url=w(n),[2,n]})})},function(n){return t(e,void 0,void 0,function(){return r(this,function(t){return n.url=j(this.config.base,n.url),[2,n]})})}],this.config=Object.assign({},m,n),this.basic_query={url:"",method:"get",headers:{},params:{},json:this.config.json},this.applyMiddleware=g.apply(void 0,this.config.middleware.concat(this.basic_middleware))}return n.prototype.query=function(n){return t(this,void 0,void 0,function(){var t,e;return r(this,function(r){switch(r.label){case 0:return[4,this.applyMiddleware(f(this.basic_query,n))];case 1:return(n=r.sent()).result?[2,n.result]:[3,2];case 2:return[4,fetch(n.url,{method:n.method,headers:n.headers})];case 3:return t=r.sent(),n.json?[4,t.json()]:[3,5];case 4:return e=r.sent(),[3,6];case 5:e=t,r.label=6;case 6:return[2,e]}})})},n}(),x=v(function(t,r){return n({},r,{headers:Object.assign({},r.headers,t)})});export{O as Fetch,x as addHeaders};
