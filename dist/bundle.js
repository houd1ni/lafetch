"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var extendStatics=function(r,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(r,e)};function __extends(r,e){function t(){this.constructor=r}extendStatics(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var __assign=function(){return(__assign=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var u in e=arguments[t])Object.prototype.hasOwnProperty.call(e,u)&&(r[u]=e[u]);return r}).apply(this,arguments)};function __awaiter(r,e,t,n){return new(t||(t=Promise))(function(u,c){function o(r){try{a(n.next(r))}catch(r){c(r)}}function i(r){try{a(n.throw(r))}catch(r){c(r)}}function a(r){r.done?u(r.value):new t(function(e){e(r.value)}).then(o,i)}a((n=n.apply(r,e||[])).next())})}function __generator(r,e){var t,n,u,c,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(u=2&c[0]?n.return:c[0]?n.throw||((u=n.return)&&u.call(n),0):n.next)&&!(u=u.call(n,c[1])).done)return u;switch(n=0,u&&(c=[2&c[0],u.value]),c[0]){case 0:case 1:u=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(u=(u=o.trys).length>0&&u[u.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!u||c[1]>u[0]&&c[1]<u[3])){o.label=c[1];break}if(6===c[0]&&o.label<u[1]){o.label=u[1],u=c;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(c);break}u[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(r,o)}catch(r){c=[6,r],n=0}finally{t=u=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}function _isPlaceholder(r){return null!=r&&"object"==typeof r&&!0===r["@@functional/placeholder"]}function _curry1(r){return function e(t){return 0===arguments.length||_isPlaceholder(t)?e:r.apply(this,arguments)}}function _curry2(r){return function e(t,n){switch(arguments.length){case 0:return e;case 1:return _isPlaceholder(t)?e:_curry1(function(e){return r(t,e)});default:return _isPlaceholder(t)&&_isPlaceholder(n)?e:_isPlaceholder(t)?_curry1(function(e){return r(e,n)}):_isPlaceholder(n)?_curry1(function(e){return r(t,e)}):r(t,n)}}}function _concat(r,e){var t;e=e||[];var n=(r=r||[]).length,u=e.length,c=[];for(t=0;t<n;)c[c.length]=r[t],t+=1;for(t=0;t<u;)c[c.length]=e[t],t+=1;return c}function _arity(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,t){return e.apply(this,arguments)};case 3:return function(r,t,n){return e.apply(this,arguments)};case 4:return function(r,t,n,u){return e.apply(this,arguments)};case 5:return function(r,t,n,u,c){return e.apply(this,arguments)};case 6:return function(r,t,n,u,c,o){return e.apply(this,arguments)};case 7:return function(r,t,n,u,c,o,i){return e.apply(this,arguments)};case 8:return function(r,t,n,u,c,o,i,a){return e.apply(this,arguments)};case 9:return function(r,t,n,u,c,o,i,a,s){return e.apply(this,arguments)};case 10:return function(r,t,n,u,c,o,i,a,s,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _curryN(r,e,t){return function(){for(var n=[],u=0,c=r,o=0;o<e.length||u<arguments.length;){var i;o<e.length&&(!_isPlaceholder(e[o])||u>=arguments.length)?i=e[o]:(i=arguments[u],u+=1),n[o]=i,_isPlaceholder(i)||(c-=1),o+=1}return c<=0?t.apply(this,n):_arity(c,_curryN(r,n,t))}}var curryN=_curry2(function(r,e){return 1===r?_curry1(e):_arity(r,_curryN(r,[],e))});function _curry3(r){return function e(t,n,u){switch(arguments.length){case 0:return e;case 1:return _isPlaceholder(t)?e:_curry2(function(e,n){return r(t,e,n)});case 2:return _isPlaceholder(t)&&_isPlaceholder(n)?e:_isPlaceholder(t)?_curry2(function(e,t){return r(e,n,t)}):_isPlaceholder(n)?_curry2(function(e,n){return r(t,e,n)}):_curry1(function(e){return r(t,n,e)});default:return _isPlaceholder(t)&&_isPlaceholder(n)&&_isPlaceholder(u)?e:_isPlaceholder(t)&&_isPlaceholder(n)?_curry2(function(e,t){return r(e,t,u)}):_isPlaceholder(t)&&_isPlaceholder(u)?_curry2(function(e,t){return r(e,n,t)}):_isPlaceholder(n)&&_isPlaceholder(u)?_curry2(function(e,n){return r(t,e,n)}):_isPlaceholder(t)?_curry1(function(e){return r(e,n,u)}):_isPlaceholder(n)?_curry1(function(e){return r(t,e,u)}):_isPlaceholder(u)?_curry1(function(e){return r(t,n,e)}):r(t,n,u)}}}var _isArray=Array.isArray||function(r){return null!=r&&r.length>=0&&"[object Array]"===Object.prototype.toString.call(r)};function _isTransformer(r){return null!=r&&"function"==typeof r["@@transducer/step"]}function _dispatchable(r,e,t){return function(){if(0===arguments.length)return t();var n=Array.prototype.slice.call(arguments,0),u=n.pop();if(!_isArray(u)){for(var c=0;c<r.length;){if("function"==typeof u[r[c]])return u[r[c]].apply(u,n);c+=1}if(_isTransformer(u)){var o=e.apply(null,n);return o(u)}}return t.apply(this,arguments)}}var _xfBase={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function _map(r,e){for(var t=0,n=e.length,u=Array(n);t<n;)u[t]=r(e[t]),t+=1;return u}function _isString(r){return"[object String]"===Object.prototype.toString.call(r)}var _isArrayLike=_curry1(function(r){return!!_isArray(r)||!!r&&("object"==typeof r&&(!_isString(r)&&(1===r.nodeType?!!r.length:0===r.length||r.length>0&&(r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1)))))}),XWrap=function(){function r(r){this.f=r}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(r){return r},r.prototype["@@transducer/step"]=function(r,e){return this.f(r,e)},r}();function _xwrap(r){return new XWrap(r)}var bind=_curry2(function(r,e){return _arity(r.length,function(){return r.apply(e,arguments)})});function _arrayReduce(r,e,t){for(var n=0,u=t.length;n<u;){if((e=r["@@transducer/step"](e,t[n]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return r["@@transducer/result"](e)}function _iterableReduce(r,e,t){for(var n=t.next();!n.done;){if((e=r["@@transducer/step"](e,n.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=t.next()}return r["@@transducer/result"](e)}function _methodReduce(r,e,t,n){return r["@@transducer/result"](t[n](bind(r["@@transducer/step"],r),e))}var symIterator="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function _reduce(r,e,t){if("function"==typeof r&&(r=_xwrap(r)),_isArrayLike(t))return _arrayReduce(r,e,t);if("function"==typeof t["fantasy-land/reduce"])return _methodReduce(r,e,t,"fantasy-land/reduce");if(null!=t[symIterator])return _iterableReduce(r,e,t[symIterator]());if("function"==typeof t.next)return _iterableReduce(r,e,t);if("function"==typeof t.reduce)return _methodReduce(r,e,t,"reduce");throw new TypeError("reduce: list must be array or iterable")}var XMap=function(){function r(r,e){this.xf=e,this.f=r}return r.prototype["@@transducer/init"]=_xfBase.init,r.prototype["@@transducer/result"]=_xfBase.result,r.prototype["@@transducer/step"]=function(r,e){return this.xf["@@transducer/step"](r,this.f(e))},r}(),_xmap=_curry2(function(r,e){return new XMap(r,e)});function _has(r,e){return Object.prototype.hasOwnProperty.call(e,r)}var toString=Object.prototype.toString,_isArguments=function(){return"[object Arguments]"===toString.call(arguments)?function(r){return"[object Arguments]"===toString.call(r)}:function(r){return _has("callee",r)}}(),hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],hasArgsEnumBug=function(){return arguments.propertyIsEnumerable("length")}(),contains=function(r,e){for(var t=0;t<r.length;){if(r[t]===e)return!0;t+=1}return!1},keys="function"!=typeof Object.keys||hasArgsEnumBug?_curry1(function(r){if(Object(r)!==r)return[];var e,t,n=[],u=hasArgsEnumBug&&_isArguments(r);for(e in r)!_has(e,r)||u&&"length"===e||(n[n.length]=e);if(hasEnumBug)for(t=nonEnumerableProps.length-1;t>=0;)_has(e=nonEnumerableProps[t],r)&&!contains(n,e)&&(n[n.length]=e),t-=1;return n}):_curry1(function(r){return Object(r)!==r?[]:Object.keys(r)}),map=_curry2(_dispatchable(["fantasy-land/map","map"],_xmap,function(r,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return curryN(e.length,function(){return r.call(this,e.apply(this,arguments))});case"[object Object]":return _reduce(function(t,n){return t[n]=r(e[n]),t},{},keys(e));default:return _map(r,e)}})),reduce=_curry3(_reduce),ap=_curry2(function(r,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](r):"function"==typeof r.ap?r.ap(e):"function"==typeof r?function(t){return r(t)(e(t))}:_reduce(function(r,t){return _concat(r,map(t,e))},[],r)}),isNil=_curry1(function(r){return null==r}),nAry=_curry2(function(r,e){switch(r){case 0:return function(){return e.call(this)};case 1:return function(r){return e.call(this,r)};case 2:return function(r,t){return e.call(this,r,t)};case 3:return function(r,t,n){return e.call(this,r,t,n)};case 4:return function(r,t,n,u){return e.call(this,r,t,n,u)};case 5:return function(r,t,n,u,c){return e.call(this,r,t,n,u,c)};case 6:return function(r,t,n,u,c,o){return e.call(this,r,t,n,u,c,o)};case 7:return function(r,t,n,u,c,o,i){return e.call(this,r,t,n,u,c,o,i)};case 8:return function(r,t,n,u,c,o,i,a){return e.call(this,r,t,n,u,c,o,i,a)};case 9:return function(r,t,n,u,c,o,i,a,s){return e.call(this,r,t,n,u,c,o,i,a,s)};case 10:return function(r,t,n,u,c,o,i,a,s,l){return e.call(this,r,t,n,u,c,o,i,a,s,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),liftN=_curry2(function(r,e){var t=curryN(r,e);return curryN(r,function(){return _reduce(ap,map(t,arguments[0]),Array.prototype.slice.call(arguments,1))})}),lift=_curry1(function(r){return liftN(r.length,r)}),curry=_curry1(function(r){return curryN(r.length,r)}),type=_curry1(function(r){return null===r?"Null":void 0===r?"Undefined":Object.prototype.toString.call(r).slice(8,-1)}),not=_curry1(function(r){return!r}),complement=lift(not);function _pipe(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function _checkForMethod(r,e){return function(){var t=arguments.length;if(0===t)return e();var n=arguments[t-1];return _isArray(n)||"function"!=typeof n[r]?e.apply(this,arguments):n[r].apply(n,Array.prototype.slice.call(arguments,0,t-1))}}var slice=_curry3(_checkForMethod("slice",function(r,e,t){return Array.prototype.slice.call(t,r,e)})),tail=_curry1(_checkForMethod("tail",slice(1,1/0)));function pipe(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return _arity(arguments[0].length,reduce(_pipe,arguments[0],tail(arguments)))}var reverse=_curry1(function(r){return _isString(r)?r.split("").reverse().join(""):Array.prototype.slice.call(r,0).reverse()});function compose(){if(0===arguments.length)throw new Error("compose requires at least one argument");return pipe.apply(this,reverse(arguments))}function _arrayFromIterator(r){for(var e,t=[];!(e=r.next()).done;)t.push(e.value);return t}function _includesWith(r,e,t){for(var n=0,u=t.length;n<u;){if(r(e,t[n]))return!0;n+=1}return!1}function _functionName(r){var e=String(r).match(/^function (\w*)/);return null==e?"":e[1]}function _objectIs(r,e){return r===e?0!==r||1/r==1/e:r!=r&&e!=e}var _objectIs$1="function"==typeof Object.is?Object.is:_objectIs;function _uniqContentEquals(r,e,t,n){var u=_arrayFromIterator(r);function c(r,e){return _equals(r,e,t.slice(),n.slice())}return!_includesWith(function(r,e){return!_includesWith(c,e,r)},_arrayFromIterator(e),u)}function _equals(r,e,t,n){if(_objectIs$1(r,e))return!0;var u=type(r);if(u!==type(e))return!1;if(null==r||null==e)return!1;if("function"==typeof r["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof r["fantasy-land/equals"]&&r["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](r);if("function"==typeof r.equals||"function"==typeof e.equals)return"function"==typeof r.equals&&r.equals(e)&&"function"==typeof e.equals&&e.equals(r);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof r.constructor&&"Promise"===_functionName(r.constructor))return r===e;break;case"Boolean":case"Number":case"String":if(typeof r!=typeof e||!_objectIs$1(r.valueOf(),e.valueOf()))return!1;break;case"Date":if(!_objectIs$1(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(r.source!==e.source||r.global!==e.global||r.ignoreCase!==e.ignoreCase||r.multiline!==e.multiline||r.sticky!==e.sticky||r.unicode!==e.unicode)return!1}for(var c=t.length-1;c>=0;){if(t[c]===r)return n[c]===e;c-=1}switch(u){case"Map":return r.size===e.size&&_uniqContentEquals(r.entries(),e.entries(),t.concat([r]),n.concat([e]));case"Set":return r.size===e.size&&_uniqContentEquals(r.values(),e.values(),t.concat([r]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=keys(r);if(o.length!==keys(e).length)return!1;var i=t.concat([r]),a=n.concat([e]);for(c=o.length-1;c>=0;){var s=o[c];if(!_has(s,e)||!_equals(e[s],r[s],i,a))return!1;c-=1}return!0}var equals=_curry2(function(r,e){return _equals(r,e,[],[])});function _filter(r,e){for(var t=0,n=e.length,u=[];t<n;)r(e[t])&&(u[u.length]=e[t]),t+=1;return u}function _isObject(r){return"[object Object]"===Object.prototype.toString.call(r)}var XFilter=function(){function r(r,e){this.xf=e,this.f=r}return r.prototype["@@transducer/init"]=_xfBase.init,r.prototype["@@transducer/result"]=_xfBase.result,r.prototype["@@transducer/step"]=function(r,e){return this.f(e)?this.xf["@@transducer/step"](r,e):r},r}(),_xfilter=_curry2(function(r,e){return new XFilter(r,e)}),filter=_curry2(_dispatchable(["filter"],_xfilter,function(r,e){return _isObject(e)?_reduce(function(t,n){return r(e[n])&&(t[n]=e[n]),t},{},keys(e)):_filter(r,e)})),empty=_curry1(function(r){return null!=r&&"function"==typeof r["fantasy-land/empty"]?r["fantasy-land/empty"]():null!=r&&null!=r.constructor&&"function"==typeof r.constructor["fantasy-land/empty"]?r.constructor["fantasy-land/empty"]():null!=r&&"function"==typeof r.empty?r.empty():null!=r&&null!=r.constructor&&"function"==typeof r.constructor.empty?r.constructor.empty():_isArray(r)?[]:_isString(r)?"":_isObject(r)?{}:_isArguments(r)?function(){return arguments}():void 0}),fromPairs=_curry1(function(r){for(var e={},t=0;t<r.length;)e[r[t][0]]=r[t][1],t+=1;return e}),isEmpty=_curry1(function(r){return null!=r&&equals(r,empty(r))}),pickBy=_curry2(function(r,e){var t={};for(var n in e)r(e[n],n,e)&&(t[n]=e[n]);return t}),toPairs=_curry1(function(r){var e=[];for(var t in r)_has(t,r)&&(e[e.length]=[t,r[t]]);return e}),unary=_curry1(function(r){return nAry(1,r)}),_this=void 0,addHeaders=curry(function(r,e){return __assign({},e,{headers:Object.assign({},e.headers,r)})}),forEach=function(){var r=function(e,t,n){return __awaiter(_this,void 0,void 0,function(){return __generator(this,function(u){switch(u.label){case 0:return n<t.length?[4,e(t[n])]:[3,3];case 1:return u.sent(),[4,r(e,t,++n)];case 2:u.sent(),u.label=3;case 3:return[2]}})})};return curry(function(e,t){return r(e,t,0)})}(),forEachAsync=curry(function(r,e){return Promise.all(e.map(r))}),waitAll=function(r){return Promise.all(r)},explore=function(r){return console.log(r)||r},clearEmpty=pickBy(unary(complement(isEmpty))),mapKeys=curry(function(r,e){return compose(fromPairs,filter(complement(isNil)),map(function(e){var t=e[0],n=e[1];return null===r[t]?null:[r[t]||t,n]}),toPairs)(e)}),asyncpipe=function(){var r=function(e,t,n){return __awaiter(_this,void 0,void 0,function(){var u,c,o,i;return __generator(this,function(a){switch(a.label){case 0:return~n?(u=e[n](t),c=r,o=[e],u instanceof Promise?[4,u]:[3,2]):[3,5];case 1:return i=a.sent(),[3,3];case 2:i=u,a.label=3;case 3:return[4,c.apply(void 0,o.concat([i,--n]))];case 4:return[2,a.sent()];case 5:return[2,t]}})})};return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return r(e,t,e.length-1)}}}();function _isPlaceholder$1(r){return null!=r&&"object"==typeof r&&!0===r["@@functional/placeholder"]}var _isPlaceholder_1=_isPlaceholder$1;function _curry1$1(r){return function e(t){return 0===arguments.length||_isPlaceholder_1(t)?e:r.apply(this,arguments)}}var _curry1_1=_curry1$1;function _curry2$1(r){return function e(t,n){switch(arguments.length){case 0:return e;case 1:return _isPlaceholder_1(t)?e:_curry1_1(function(e){return r(t,e)});default:return _isPlaceholder_1(t)&&_isPlaceholder_1(n)?e:_isPlaceholder_1(t)?_curry1_1(function(e){return r(e,n)}):_isPlaceholder_1(n)?_curry1_1(function(e){return r(t,e)}):r(t,n)}}}var _curry2_1=_curry2$1;function _curry3$1(r){return function e(t,n,u){switch(arguments.length){case 0:return e;case 1:return _isPlaceholder_1(t)?e:_curry2_1(function(e,n){return r(t,e,n)});case 2:return _isPlaceholder_1(t)&&_isPlaceholder_1(n)?e:_isPlaceholder_1(t)?_curry2_1(function(e,t){return r(e,n,t)}):_isPlaceholder_1(n)?_curry2_1(function(e,n){return r(t,e,n)}):_curry1_1(function(e){return r(t,n,e)});default:return _isPlaceholder_1(t)&&_isPlaceholder_1(n)&&_isPlaceholder_1(u)?e:_isPlaceholder_1(t)&&_isPlaceholder_1(n)?_curry2_1(function(e,t){return r(e,t,u)}):_isPlaceholder_1(t)&&_isPlaceholder_1(u)?_curry2_1(function(e,t){return r(e,n,t)}):_isPlaceholder_1(n)&&_isPlaceholder_1(u)?_curry2_1(function(e,n){return r(t,e,n)}):_isPlaceholder_1(t)?_curry1_1(function(e){return r(e,n,u)}):_isPlaceholder_1(n)?_curry1_1(function(e){return r(t,e,u)}):_isPlaceholder_1(u)?_curry1_1(function(e){return r(t,n,e)}):r(t,n,u)}}}var _curry3_1=_curry3$1;function _isObject$1(r){return"[object Object]"===Object.prototype.toString.call(r)}var _isObject_1=_isObject$1;function _has$1(r,e){return Object.prototype.hasOwnProperty.call(e,r)}var _has_1=_has$1,mergeWithKey=_curry3_1(function(r,e,t){var n,u={};for(n in e)_has_1(n,e)&&(u[n]=_has_1(n,t)?r(n,e[n],t[n]):e[n]);for(n in t)_has_1(n,t)&&!_has_1(n,u)&&(u[n]=t[n]);return u}),mergeWithKey_1=mergeWithKey,mergeDeepWithKey=_curry3_1(function r(e,t,n){return mergeWithKey_1(function(t,n,u){return _isObject_1(n)&&_isObject_1(u)?r(e,n,u):e(t,n,u)},t,n)}),mergeDeepWithKey_1=mergeDeepWithKey,mergeDeepRight=_curry2_1(function(r,e){return mergeDeepWithKey_1(function(r,e,t){return t},r,e)}),mergeDeepRight_1=mergeDeepRight,type$1=_curry1_1(function(r){return null===r?"Null":void 0===r?"Undefined":Object.prototype.toString.call(r).slice(8,-1)}),type_1=type$1,trim=curry(function(r,e){for(var t,n=null,u=null,c=0;c<e.length;c++)t=e[c],r.includes(t)?n&&(u=c):(null==n&&(n=c),u=null);return e.slice(n||0,u||e.length)}),formURI=function(r){var e=[];if(r.params){var t=[];Object.entries(r.params).forEach(function(r){var e=r[0],n=r[1];null!=n&&(n=String(n),t.push(e+"="+n.replace(/&/g,"\\&")))}),t.length&&e.push("?"+t.join("&"))}return encodeURI((r.url||"")+e.map(trim("-")).join("/"))},trimSlash=trim("/"),addBase=function(r,e){return e.includes("://")||e.startsWith(r)?e:trimSlash(r)+"/"+trimSlash(e)},hole=function(r){return r},_this$1=void 0,default_config={base:"/",json:!0,headers:{},timeout:1e4,middleware:{in:[],out:[]}},finalTransform=function(r){return"out"==r?hole:function(r){var e=r.query,t=r.response;return __awaiter(_this$1,void 0,void 0,function(){var r;return __generator(this,function(n){switch(n.label){case 0:return e.json?[4,t.json()]:[3,2];case 1:return r=n.sent(),[3,3];case 2:r=t,n.label=3;case 3:return[2,r]}})})}},Fetch=function(){function r(r){var e=this;void 0===r&&(r={}),this.middleware={in:[],out:[function(r){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){return r.url=formURI(r),[2,r]})})},function(r){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){return r.url=addBase(this.config.base,r.url),[2,r]})})},function(r){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){return"Object"==type_1(r.body)&&((r=addHeaders({"Content-Type":"application/json"},r)).body=JSON.stringify(r.body)),[2,r]})})},function(r){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(t){for(e in r.headers)"Null"==type_1(r.headers[e])&&delete r.headers[e];return[2,r]})})}]},this.config=mergeDeepRight_1(default_config,r),this.basic_query={url:"",method:"get",headers:{},params:{},result:null,body:null,json:this.config.json,timeout:this.config.timeout,misc:{}};for(var t={},n=0,u=["in","out"];n<u.length;n++){var c=u[n];t[c]=asyncpipe.apply(void 0,[finalTransform(c)].concat(this.middleware[c],this.config.middleware[c]))}this.applyMiddleware=t}return r.prototype.query=function(r){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return[4,this.applyMiddleware.out(mergeDeepRight_1(this.basic_query,r))];case 1:return(r=n.sent()).result?[2,r.result]:(e={method:r.method,headers:r.headers},r.body&&(e.body=r.body),[2,new Promise(function(n,u){return __awaiter(t,void 0,void 0,function(){var t,c,o;return __generator(this,function(i){switch(i.label){case 0:return t=!1,c=setTimeout(function(){t=!0,u("timeout")},r.timeout),[4,fetch(r.url,e)];case 1:return o=i.sent(),t||(clearTimeout(c),n(this.applyMiddleware.in({query:r,response:o}))),[2]}})})})])}})})},r}(),Cached=function(){function r(){this.cache={},this.proceccing={}}return r.prototype.tryCache=function(r,e){var t=this;return new Promise(function(n,u){t.cache[r]?n(t.cache[r]):t.proceccing[r]?t.proceccing[r].push({ff:n,rj:u}):(t.proceccing[r]=[{ff:n,rj:u}],e().then(function(e){t.cache[r]=e,t.proceccing[r].forEach(function(r){return(0,r.ff)(e)}),delete t.proceccing[r]}).catch(function(e){t.proceccing[r].forEach(function(r){return(0,r.rj)(e)})}))})},r}(),FetchError=function(){function r(r){this.pattern=/never/,this.name="Fetch",this.response=r}return Object.defineProperty(r.prototype,"type",{get:function(){return this.name.toLowerCase()},enumerable:!0,configurable:!0}),r.prototype.is=function(r){return this.pattern.test(String(r))},r.prototype.try=function(){var r=this.response;if(this.is(r.status))throw new Error("HTTP "+this.name+" error: status is "+r.status)},r}(),AccessError=function(r){function e(e){var t=r.call(this,e)||this;return t.pattern=/4\d[13]/,t.name="Access",t.try(),t}return __extends(e,r),e}(FetchError),ServerError=function(r){function e(e){var t=r.call(this,e)||this;return t.pattern=/5\d\d/,t.name="Server",t.try(),t}return __extends(e,r),e}(FetchError);exports.AccessError=AccessError,exports.Cached=Cached,exports.Fetch=Fetch,exports.ServerError=ServerError,exports.addHeaders=addHeaders,exports.asyncpipe=asyncpipe,exports.clearEmpty=clearEmpty,exports.explore=explore,exports.forEach=forEach,exports.forEachAsync=forEachAsync,exports.formURI=formURI,exports.mapKeys=mapKeys,exports.waitAll=waitAll;
